<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600|Open+Sans:400,600,700" rel="stylesheet">
    <link rel="stylesheet" href="css/spur.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.12.4/sweetalert2.min.css" integrity="sha512-WxRv0maH8aN6vNOcgNFlimjOhKp+CUqqNougXbz0E+D24gP5i+7W/gcc5tenxVmr28rH85XHF5eXehpV2TQhRg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.12.4/sweetalert2.min.js" integrity="sha512-w4LAuDSf1hC+8OvGX+CKTcXpW4rQdfmdD8prHuprvKv3MPhXH9LonXX9N2y1WEl2u3ZuUSumlNYHOlxkS/XEHA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <title>CMS-DASHBOARD</title>
</head>

<body>
    <div class="dash" id="app">
        <div class="dash-nav dash-nav-dark">
            <header>
                <a href="#!" class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </a>
                <a href="index.html" class="spur-logo"><i class="fas fa-trophy"></i> <span>CMS</span></a>
            </header>
            <nav class="dash-nav-list">
                <a href="index.html" class="dash-nav-item">
                    <i class="fas fa-home"></i> 仪表盘 </a>
                <div class="dash-nav-dropdown">
                    <a href="#!" class="dash-nav-item dash-nav-dropdown-toggle">
                        <i class="fas fa-plus"></i> 添加信息 </a>

                    <div class="dash-nav-dropdown-menu">
                        <a href="competition-result.html" class="dash-nav-dropdown-item">新增竞赛成果</a>
                    </div>
                    <div class="dash-nav-dropdown-menu">
                        <a href="competition-name.html" class="dash-nav-dropdown-item">新增竞赛条目</a>
                    </div>
                    <div class="dash-nav-dropdown-menu">
                        <a href="major-name.html" class="dash-nav-dropdown-item">新增专业条目</a>
                    </div>
                    <div class="dash-nav-dropdown-menu">
                        <a href="faculty-name.html" class="dash-nav-dropdown-item">新增学院条目</a>
                    </div>
                </div>
                <a href="query-competition-results.html" class="dash-nav-item">
                    <i class="fas fa-search"></i> 查询记录 </a>
            </nav>
        </div>
        <div class="dash-app">
            <header class="dash-toolbar">
                <a href="#!" class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </a>
                <div class="tools">
                    <div class="dropdown tools-item">
                        <a href="#" class="" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-user"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                            <a class="dropdown-item" href="profile.html">个人信息</a>
                            <a class="dropdown-item" href="../login.html">登出</a>
                        </div>
                    </div>
                </div>
            </header>
            <main class="dash-content">
                <div class="container-fluid">
                    <div class="row dash-row">
                        <div class="col-xl-4">
                            <div class="stats stats-primary">
                                <h3 class="stats-title"> 总竞赛记录数</h3>
                                <div class="stats-content">
                                    <div class="stats-icon">
                                        <i class="fas fa-pen"></i>
                                    </div>
                                    <div class="stats-data">
                                        <div class="stats-number">{{allCompetitionResultsNumber}}</div>
                                        <div class="stats-change">
                                            <span class="stats-timeframe">今年共</span>
                                            <span class="stats-percentage">{{competitionThisYearResultsNumber}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-4">
                            <div class="stats stats-danger">
                                <h3 class="stats-title"> 总国奖记录数 </h3>
                                <div class="stats-content">
                                    <div class="stats-icon">
                                        <i class="fas fa-list-ol"></i>
                                    </div>
                                    <div class="stats-data">
                                        <div class="stats-number">{{nationalLevelCompetitionResultsNumber}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-4">
                            <div class="stats stats-info">
                                <h3 class="stats-title"> 总省奖记录数 </h3>
                                <div class="stats-content">
                                    <div class="stats-icon">
                                        <i class="fas fa-list-ol"></i>
                                    </div>
                                    <div class="stats-data">
                                        <div class="stats-number">{{provincialLevelCompetitionResultsNumber}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6">
                            <div class="card spur-card">
                                <div class="card-header">
                                    <div class="spur-card-icon">
                                        <i class="fas fa-history"></i>
                                    </div>
                                    <div class="spur-card-title"> 数据修改历史 </div>
                                </div>
                                <div class="card-body ">
                                    <div class="notifications">
                                        <a href="#!" class="notification">
                                            <div class="notification-icon">
                                                <i class="fas fa-inbox"></i>
                                            </div>
                                            <div class="notification-text">New comment</div>
                                            <span class="notification-time">21 days ago</span>
                                        </a>
                                        <a href="#!" class="notification">
                                            <div class="notification-icon">
                                                <i class="fas fa-inbox"></i>
                                            </div>
                                            <div class="notification-text">New comment</div>
                                            <span class="notification-time">21 days ago</span>
                                        </a>
                                        <a href="#!" class="notification">
                                            <div class="notification-icon">
                                                <i class="fas fa-inbox"></i>
                                            </div>
                                            <div class="notification-text">New comment</div>
                                            <span class="notification-time">21 days ago</span>
                                        </a>
                                        <div class="notifications-show-all">
                                            <a href="#!">Show all</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </main>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="js/spur.js"></script>
    <script src="/dashboard/js/vue3.js"> </script>
    <script>
        const {createApp} = Vue;

        createApp({
            data(){
                return{
                    competitionNamesNumber : 0,
                    allCompetitionResultsNumber : 0,
                    competitionThisYearResultsNumber : 0,
                    provincialLevelCompetitionResultsNumber: 0,
                    nationalLevelCompetitionResultsNumber: 0
                }
            },
            methods:{
                countCompetitionNames() {
                    fetch("/add-info/competition-name/count", {method: 'GET'})
                        .then(res => res.json())
                        .then(res => {
                            if(res.code === 1){
                                this.competitionNamesNumber = res.data;
                            }
                            else{
                                alert("出错了");
                            }
                        })
                },
                countAllCompetitionResults() {
                    fetch("/add-info/competition-result/count-all", {method: 'GET'})
                        .then(res => res.json())
                        .then(res => {
                            if(res.code === 1){
                                this.allCompetitionResultsNumber = res.data;
                            }
                            else{
                                alert("出错了");
                            }
                        })
                },
                countThisYearCompetitionResults() {
                    fetch("/add-info/competition-result/count-thisYear", {method: 'GET'})
                        .then(res => res.json())
                        .then(res => {
                            if(res.code === 1){
                                this.competitionThisYearResultsNumber = res.data;
                            }
                            else{
                                alert("出错了");
                            }
                        })
                },
                countNationalLevelCompetitionResults(){
                    fetch("/add-info/competition-result/count-nationalLevel", {method: 'GET'})
                        .then(res => res.json())
                        .then(res => {
                            if(res.code === 1){
                                this.nationalLevelCompetitionResultsNumber = res.data;
                            }
                            else{
                                alert("出错了");
                            }
                        })
                },

                countProvincialLevelCompetitionResults(){
                    fetch("/add-info/competition-result/count-provincialLevel", {method: 'GET'})
                        .then(res => res.json())
                        .then(res => {
                            if(res.code === 1){
                                this.provincialLevelCompetitionResultsNumber = res.data;
                            }
                            else{
                                alert("出错了");
                            }
                        })
                }
            },
            async created(){
                this.countCompetitionNames();
                this.countAllCompetitionResults();
                this.countThisYearCompetitionResults();
                this.countNationalLevelCompetitionResults();
                this.countProvincialLevelCompetitionResults();
            }
        }).mount("#app")

    </script>
</body>

</html>
